#!/usr/bin/env node

var handledown = require("../lib/handledown");
var fs = require("fs");
var csv = require("csv");


var mdPath = process.argv[2];
var csvPath = process.argv[3];

if (process.argv.length != 3 || !fs.existsSync(mdPath) || !fs.existsSync(csvPath)) {
	console.error("usage: handledown <markdown-template-file> <data-csv>");
} else {
	csv.parse(fs.readFileSync(csvPath, 'utf8'), function (csvData) {
		fs.readFileSync(mdPath, 'utf8', function (mdData) {
			handledown(csvData, mdData, function (data) {
				console.log(data);
			})
		});
	});
}